# vezdecode-backend
Решение команды «Кыр Сосичка»

Задание: https://vk.com/@vezdekod-back-end-12402

# Структура репозитория
Репозиторий состоит из трех частей

1. Сервис обработки запросов - `service`
2. Приложение для нагрузочных тестов - `perf`
3. Балансер - `balancer`

# Запуск
Во всех случаях я решил использовать переменные среды как способ передать приложению конфигурацию
Каждая из частей собирается отдельно командой `mvn package`

## Запуск сервиса
В качестве переменных сред сервис ожидает:
* ARTISTS - список артистов, записанных через запятую
* BUCKET_LIMITS - максимальное количество запросов до защиты от DDos;
* BUCKET_REFILL - период восстановления;
* SERVER_ADDRESS - адрес, на котором будет ожидать запросов сервис;
* SERVER_PORT - порт, на котором будет ожидать запросов сервис

Пример запуска на Linux:

`ARTISTS=a,b SERVER_PORT=8080 SERVER_ADDRESS=localhost BUCKET_LIMITS=100 BUCKET_REFILL=1000000 java -jar service-1.0.2.jar`

## Запуск утилиты для стресс тестирования
В качестве переменных сред утилита ожидает:
* ARTISTS - список артистов, записанных через запятую

Интерфейс комнадной строки соответствует заданию.
Пример запуска на Linux:

`ARTISTS=a,b java -jar service-perf-1.0.2.jar -n 1000 -c 10 localhost:8080`

## Запуск балансировщика
В качестве переменных балансировщик ожидает:
* SERVER_ADDRESS - адрес, на котором будет ожидать запросов сервис;
* SERVER_PORT - порт, на котором будет ожидать запросов сервис
* SERVICES - список сервисов для балансировки, записанных через запятую

Интерфейс комнадной строки соответствует заданию.
Пример запуска на Linux:

`SERVER_ADDRESS=localhost SERVER_PORT=8085 SERVICES=localhost:8080,localhost:8081 java -jar balancer-1.0.2.jar`


# Особенности реализации
Использована система сборки Maven, язык Java-17

# Использованные библиотеки
* Spring boot/Spring WEB (сервис и балансировщик) - фреймворк
* Gson (сервис, утилита, балансировщик) - работа с Json
* Bucket4j (сервис) - реализует token bucket
* JCommander (утилита) - парсинг аргументов командной строки
* java-crc (балансировщик) - реализация crc16
